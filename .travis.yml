sudo:
  - false

branches:
  only:
    - develop
    - stable

matrix:
  include:
    - name: "OS X / Xcode 11.6"
      os: osx
      osx_image: xcode11.6
      language: swift
      script:
        - swift test

    - name: "Ubuntu 16.04 / Swift 5.2.4"
      os: linux
      dist: xenial
      language: c
      before_script:
        - wget https://swift.org/builds/swift-5.2.4-release/ubuntu1604/swift-5.2.4-RELEASE/swift-5.2.4-RELEASE-ubuntu16.04.tar.gz
        - tar xzf swift-5.2.4-RELEASE-ubuntu16.04.tar.gz
        - export PATH=$(pwd)/swift-5.2.4-RELEASE-ubuntu16.04/usr/bin:"${PATH}"
        - swift --version
      script:
        - swift test --enable-test-discovery

    - name: "Ubuntu 16.04 / Swift latest"
      os: linux
      dist: xenial
      language: c
      before_script:
        - wget "https://swift.org/builds/development/ubuntu1604/swift-DEVELOPMENT-SNAPSHOT-2020-06-19-a/swift-DEVELOPMENT-SNAPSHOT-2020-06-19-a-ubuntu16.04.tar.gz"
        - tar xzf swift-DEVELOPMENT-SNAPSHOT-2020-06-19-a-ubuntu16.04.tar.gz
        - export PATH=$(pwd)/swift-DEVELOPMENT-SNAPSHOT-2020-06-19-a-ubuntu16.04/usr/bin:"${PATH}"
        - swift --version
      script:
        - swift test --enable-test-discovery
